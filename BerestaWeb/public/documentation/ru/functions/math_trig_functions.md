# Тригонометрия

Тригонометрическая библиотека **BerestaLanguage** предоставляет полную поддержку работы как с радианами, так и с градусами, а также включает геометрические функции для 2D-операций с координатами.  
Все функции выполняют строгую проверку аргументов и округляют результаты, чтобы снизить ошибки вычислений с плавающей точкой.

---

## Константы

Внутренне используются две неявные константы:

- `DEGTORAD = π / 180`
- `RADTODEG = 180 / π`

---

## 1. Функции на основе радиан

| Функция | Описание | Ограничения |
|-----------|-----------|--------------|
| `sin(x)` | Возвращает синус `x` (в радианах). | Аргумент должен быть числовым. |
| `cos(x)` | Возвращает косинус `x` (в радианах). | Аргумент должен быть числовым. |
| `tan(x)` | Возвращает тангенс `x` (в радианах). Выдаёт ошибку, если результат бесконечен. | Результат должен быть конечным. |
| `arcsin(x)` | Возвращает арксинус `x` (в радианах). | Аргумент должен находиться в диапазоне [-1, 1]. |
| `arccos(x)` | Возвращает арккосинус `x` (в радианах). | Аргумент должен находиться в диапазоне [-1, 1]. |
| `arctan(x)` | Возвращает арктангенс `x` (в радианах). | Только числовые значения. |
| `arctan2(y, x)` | Возвращает `atan2(y, x)` (в радианах). Учитывает знаки обеих координат. | Требуются два числовых аргумента. |

Примеры:
```beresta
console_print(sin(3.14159 / 2)); // 1
console_print(cos(0));           // 1
console_print(tan(3.14159 / 4)); // 1

console_print(arcsin(0));        // 0
console_print(arccos(0));        // 1.57
console_print(arctan(1));        // 0.78
console_print(arctan2(1, 1));    // 0.78
```

---

## 2. Функции на основе градусов

Функции, начинающиеся с буквы `d`, работают с градусами вместо радиан.  
Они автоматически конвертируют значения и округляют результат до двух знаков после запятой для стабильности.

| Функция | Описание | Ограничения |
|-----------|-----------|--------------|
| `dsin(x)` | Возвращает синус `x` (в градусах). | Аргумент должен быть числовым. |
| `dcos(x)` | Возвращает косинус `x` (в градусах). | Аргумент должен быть числовым. |
| `dtan(x)` | Возвращает тангенс `x` (в градусах). Выдаёт ошибку, если результат бесконечен. | Результат должен быть конечным. |
| `darcsin(x)` | Возвращает арксинус `x` (в градусах). | Аргумент должен быть в диапазоне [-180, 180]. |
| `darccos(x)` | Возвращает арккосинус `x` (в градусах). | Аргумент должен быть в диапазоне [-180, 180]. |
| `darctan(x)` | Возвращает арктангенс `x` (в градусах). | Только числовые значения. |
| `darctan2(y, x)` | Возвращает `atan2(y, x)` (в градусах). Учитывает знаки обеих координат. | Требуются два числовых аргумента. |

Примеры:
```beresta
console_print(dsin(90));      // 1
console_print(dcos(45));      // 0.71
console_print(dtan(45));      // 1
console_print(darcsin(-1));   // -90
console_print(darccos(-1));   // 180
console_print(darctan(1));    // 45
console_print(darctan2(1,1)); // 45
```

---

## 3. Геометрические функции

Эти функции предназначены для 2D-геометрии и часто используются в игровой логике и симуляциях.

| Функция | Описание | Ограничения |
|----------------------------|------------------------------------------|--------------|
| `point_direction(x1, y1, x2, y2)` | Возвращает направление (в градусах) от `(x1, y1)` к `(x2, y2)`. | Требуются 4 числовых аргумента. |
| `point_distance(x1, y1, x2, y2)` | Возвращает расстояние между двумя точками. | Требуются 4 числовых аргумента. |
| `lengthdir_x(length, dir)` | Возвращает компонент X вектора с заданной длиной и направлением (в градусах). | Требуются 2 числовых аргумента. |
| `lengthdir_y(length, dir)` | Возвращает компонент Y вектора (отрицательное направление Y) с заданной длиной и направлением. | Требуются 2 числовых аргумента. |

Примеры:
```beresta
console_print(point_direction(0, 0, 1, 0)); // 0
console_print(point_distance(0, 0, 3, 4));  // 5

console_print(lengthdir_x(64, 90)); // 0
console_print(lengthdir_y(64, 90)); // -64
```

---

## 4. Точность и округление

Все функции, работающие с градусами, округляют результат до двух знаков после запятой, чтобы уменьшить ошибки округления.  
Значения меньше 0.00001 считаются равными нулю.

Пример:
```beresta
console_print(dcos(90)); // 0
```

---

## Примечания

- Функции для радиан и градусов могут использоваться совместно.  
- Предпочитай функции с градусами для игровых координат и вращений.  
- Функции на радианах обеспечивают более высокую точность для математических расчётов.  
- Все функции возвращают числовые значения и не изменяют состояние программы.
